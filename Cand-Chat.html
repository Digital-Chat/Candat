<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login â€” Canned Tool</title>
<style>
  body {
    margin:0;
    font-family:'Tajawal',sans-serif;
    background:linear-gradient(135deg,#020617,#0b193c);
    color:#fff;
  }
  /* overlay */
  #loginOverlay{
    position:fixed;inset:0;
    display:flex;align-items:center;justify-content:center;
    background:linear-gradient(135deg,rgba(2,6,23,0.96),rgba(11,25,60,0.95));
    z-index:99999;
    transition:opacity .4s ease;
  }
  #loginBox{
    width:360px;max-width:94%;
    background:#0f1724;
    border-radius:12px;
    padding:22px 20px 20px;
    box-shadow:0 10px 40px rgba(0,0,0,0.6);
    color:#fff;text-align:center;
  }
  /* logo + title */
  .logoHeader{
    display:flex;align-items:center;justify-content:center;gap:10px;
    margin-bottom:10px;
  }
  .logoCircle{
    width:38px;height:38px;border-radius:50%;
    background:linear-gradient(135deg,#007BFF,#5B21B6);
    display:flex;align-items:center;justify-content:center;
    font-weight:800;font-size:20px;color:#fff;
    box-shadow:0 0 10px rgba(0,123,255,0.4);
  }
  .logoHeader span{
    font-size:20px;font-weight:700;color:#fff;letter-spacing:.5px;
  }
  #loginBox h3{
    margin:0 0 14px;font-size:17px;color:#FFD700;
    text-shadow:0 0 8px rgba(255,215,0,0.12);
  }
  #loginBox input{
    box-sizing:border-box;
    width:100%;height:44px;
    padding:0 12px;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.15);
    background-color:rgba(255,255,255,0.05);
    color:#fff;margin:0 0 14px;
    outline:none;font-size:15px;
    direction:ltr;text-align:left;line-height:44px;
    caret-color:#4ea8ff;
    transition:border .18s ease,box-shadow .18s ease,background .12s ease;
  }
  #loginBox input::placeholder{color:rgba(255,255,255,0.65);}
  #loginBox input:focus{
    border-color:#4ea8ff;
    box-shadow:0 0 6px rgba(78,168,255,0.38);
    background-color:rgba(255,255,255,0.07);
  }
  #loginBox button{
    padding:10px 12px;width:100%;
    border-radius:8px;border:none;cursor:pointer;
    font-weight:700;font-size:15px;color:#fff;
    background:linear-gradient(90deg,#4ea8ff,#7c3aed);
    transition:transform .15s ease,box-shadow .15s ease;
    box-shadow:0 3px 8px rgba(0,0,0,0.25);
  }
  #loginBox button:hover{
    transform:translateY(-1px);
    box-shadow:0 4px 10px rgba(0,0,0,0.35);
  }
  #loginBox button:active{
    transform:translateY(1px);
    box-shadow:0 2px 6px rgba(0,0,0,0.2);
  }
  #loginMsg{color:#ffb3b3;font-size:13px;min-height:18px;margin-top:8px;}
  #protectedApp{display:none;opacity:0;transition:opacity .6s ease;}
</style>
</head>
<body>

<!-- Login Overlay -->
<div id="loginOverlay">
  <div id="loginBox">
    <div class="logoHeader">
      <div class="logoCircle">C</div>
      <span>Canned Tool</span>
    </div>
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
    <input id="loginPwd" type="password" placeholder="Enter Password" autocomplete="off">
    <button id="loginBtn">Login</button>
    <div id="loginMsg"></div>
    <div style="margin-top:12px;font-size:12px;color:rgba(255,255,255,0.6);">
      Ù…Ø­Ù…ÙŠØ© Ø¨ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±
    </div>
  </div>
</div>

<!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ -->
<div id="protectedApp">
  <!-- // or if your HTML already has a main root, set its id accordingly and remove the overlay when correct.
  document.addEventListener('DOMContentLoaded', () => {
    const overlay = document.getElementById('loginOverlay');
    const btn = document.getElementById('loginBtn');
    const pwd = document.getElementById('loginPwd');
    const msg = document.getElementById('loginMsg');

    // focus
    pwd.focus();

    function unlock() {
      if (pwd.value === FIXED_PASSWORD) {
        // remove overlay and show app
        overlay.style.opacity = '0';
        setTimeout(()=> overlay.style.display = 'none', 220);
        // reveal protected app container if exists
        const protectedEl = document.getElementById('protectedApp');
        if (protectedEl) protectedEl.style.display = 'block';
        // optionally set a flag in sessionStorage so page reload in same session stays unlocked
        sessionStorage.setItem('candat_unlocked', '1');
        msg.textContent = '';
      } else {
        msg.textContent = 'Wrong Password';
        pwd.value = '';
        pwd.focus();
      }
    }

    btn.addEventListener('click', unlock);
    pwd.addEventListener('keydown', (e)=> { if (e.key === 'Enter') unlock(); });

    // if previously unlocked in this tab session â€” skip login
    if (sessionStorage.getItem('candat_unlocked') === '1') {
      overlay.style.display = 'none';
      const protectedEl = document.getElementById('protectedApp');
      if (protectedEl) protectedEl.style.display = 'block';
    }

    // ===== Basic client-side protection (deterrents) =====
    // Disable right-click
    document.addEventListener('contextmenu', (e) => {
      // allow if overlay active (so admin can still inspect if needed), otherwise prevent
      if (!overlay || overlay.style.display === 'none') e.preventDefault();
    });

    // Block common dev-tools shortcuts
    document.addEventListener('keydown', function(e) {
      // F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
      if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) || (e.ctrlKey && e.key === 'U')) {
        e.preventDefault();
        e.stopPropagation();
      }
    });

    // Also try to detect when devtools opened (best-effort) and hide overlay (deterrent)
    let devtoolsOpened = false;
    const threshold = 160;
    setInterval(function() {
      const widthThreshold = window.outerWidth - window.innerWidth > threshold;
      const heightThreshold = window.outerHeight - window.innerHeight > threshold;
      if ((widthThreshold || heightThreshold) && !devtoolsOpened) {
        devtoolsOpened = true;
        console.warn('DevTools detected â€” access is discouraged');
      }
    }, 1000);
  });
</script>
<!-- ===== end login overlay ===== -->
<div id="protectedApp" style="display:none;">
<body data-theme="dark">

<!-- Splash Screen -->
<div class="splash" id="splash">
  <div class="splash-box">
    <div class="gear">âš™ï¸</div>
    <div style="font-weight:800;color:var(--text);">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø©...</div>
  </div>
</div>

<!-- Header -->
<div class="header-wrap">
  <div class="marquee">
    <span class="text">âš ï¸ Ù…Ø´ Ù…Ø­ØªØ§Ø¬ Ø£Ù‚ÙˆÙ„Ùƒ Ø¥Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ø£ÙŠ ÙƒØ§Ù†Ø¯ Ù‡Ùˆ Ø¹Ù„Ù‰ Ù…Ø³Ø¤ÙˆÙ„ÙŠØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆÙ„Ø§Ø²Ù… Ø¯Ø§ÙŠÙ…Ù‹Ø§ ØªØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ÙˆÙŠÙƒÙŠ âš ï¸</span>
  </div>
</div>

<!-- Theme Toggle -->
<button class="theme-toggle" id="themeToggle">ğŸŒ™</button>

<!-- Layout Wrapper -->
<div class="app">

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="upload-row">
      <button class="upload-btn" id="uploadBtn">ğŸ“¤ Ø±ÙØ¹ Ù…Ù„Ù Excel</button>
      <input type="file" id="fileInput" accept=".xlsx" style="display:none">
    </div>
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¯Ø§Ø®Ù„ ÙƒÙ„ Ø§Ù„Ø´ÙŠØªØ§Øª...">
    </div>
    <div class="sheet-list" id="sheetList"></div>
  </div>

  <!-- Main Content -->
  <div class="main">
    <div class="main-header">
      <h2 id="sheetTitle">ğŸ“‹ Ø§Ø®ØªØ± ØµÙØ­Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h2>
      <span class="instructions">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø±Ø¨Ø¹ Ù„Ù†Ø³Ø® Ø§Ù„Ù€ Content ÙÙ‚Ø·</span>
    </div>
    <div class="grid" id="cardsGrid">
      <div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© ğŸ”</div>
    </div>
  </div>

</div>

<!-- Footer -->
<div class="footer-wrapper">
  <div class="footer-bar">
    <div class="text">Designed and Developed By Geek @2025</div>
  </div>
</div>

<!-- Click sound Base64 -->
<audio id="clickSound">
  <source src="data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCA..."
          type="audio/mp3">
</audio>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const splash = document.getElementById("splash");
  const sheetList = document.getElementById("sheetList");
  const cardsGrid = document.getElementById("cardsGrid");
  const fileInput = document.getElementById("fileInput");
  const uploadBtn = document.getElementById("uploadBtn");
  const searchInput = document.getElementById("searchInput");
  const clickSound = document.getElementById("clickSound");
  const themeToggle = document.getElementById("themeToggle");
  const sheetTitle = document.getElementById("sheetTitle");

  let workbookData = {};
  let currentSheet = null;

  // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
  setTimeout(() => splash.style.opacity = "0", 800);
  setTimeout(() => splash.style.display = "none", 1200);

  // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…
  themeToggle.addEventListener("click", () => {
    const current = document.body.getAttribute("data-theme");
    const next = current === "dark" ? "light" : "dark";
    document.body.setAttribute("data-theme", next);
    themeToggle.textContent = next === "dark" ? "ğŸŒ™" : "â˜€ï¸";
  });

  // ØªØ­Ù…ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯ (Ù„Ù€ GitHub Pages)
  fetch('candat_data.xlsx')
    .then(resp => {
      if (!resp.ok) throw new Error("File not found");
      return resp.arrayBuffer();
    })
    .then(buffer => {
      const wb = XLSX.read(buffer, { type: "array" });
      handleWorkbook(wb);
    })
    .catch(() => console.log("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ù - ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹Ù‡ ÙŠØ¯ÙˆÙŠÙ‹Ø§"));

  // Ø±ÙØ¹ ÙŠØ¯ÙˆÙŠ
  uploadBtn.addEventListener("click", () => fileInput.click());
  fileInput.addEventListener("change", e => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = evt => {
      const data = new Uint8Array(evt.target.result);
      const wb = XLSX.read(data, { type: "array" });
      handleWorkbook(wb);
    };
    reader.readAsArrayBuffer(file);
  });

  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù„Ù Excel
  function handleWorkbook(wb) {
    workbookData = {};
    wb.SheetNames.forEach(name => {
      const ws = wb.Sheets[name];
      const rows = XLSX.utils.sheet_to_json(ws, { header: 1 });
      const items = [];
      // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ (Name / Content)
      for (let i = 1; i < rows.length; i++) {
        if (rows[i][0] && rows[i][1]) {
          items.push({ name: rows[i][0], content: rows[i][1], sheet: name });
        }
      }
      workbookData[name] = items;
    });
    renderSheetList(wb.SheetNames);
    if (wb.SheetNames.length) showSheet(wb.SheetNames[0]);
  }

  // Ø¹Ø±Ø¶ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø´ÙŠØªØ§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  function renderSheetList(names) {
    sheetList.innerHTML = "";
    names.forEach(name => {
      const btn = document.createElement("div");
      btn.className = "sheet-item";
      btn.textContent = name;
      btn.addEventListener("click", () => showSheet(name));
      sheetList.appendChild(btn);
    });
  }

  // Ø¹Ø±Ø¶ Ø§Ù„Ø´ÙŠØª Ø§Ù„Ù…Ø­Ø¯Ø¯
  function showSheet(name) {
    currentSheet = name;
    document.querySelectorAll(".sheet-item").forEach(el => el.classList.remove("active"));
    [...sheetList.children].find(el => el.textContent === name)?.classList.add("active");
    sheetTitle.textContent = `ğŸ“„ Ø´ÙŠØª: ${name}`;
    renderCards(workbookData[name]);
  }

  // Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ±ÙˆØª
  function renderCards(items) {
    cardsGrid.innerHTML = "";
    if (!items || !items.length) {
      cardsGrid.innerHTML = '<div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© ğŸ”</div>';
      return;
    }
    items.forEach((item, index) => {
      const card = document.createElement("div");
      card.className = "card";

      const hasNewlines = (item.content.match(/\n/g) || []).length > 0;
      const formatted = hasNewlines 
        ? item.content.replace(/\n/g, "<p>&nbsp;</p>")
        : item.content;

      card.innerHTML = `
        <div class="card-title">${item.name}</div>
        <div class="card-content">
          <div class="frame">${formatted}</div>
        </div>
        <div class="card-footer">ğŸ“„ Ù…Ù† Ø´ÙŠØª: ${item.sheet}</div>`;

      card.addEventListener("click", () => {
        copyText(hasNewlines ? formatted : item.content);
        playClick();
      });

      cardsGrid.appendChild(card);
      setTimeout(() => card.classList.add("visible"), 100 + index * 40);
    });
  }

  // Ø§Ù„Ù†Ø³Ø®
  function copyText(text) {
    const temp = document.createElement("textarea");
    temp.value = text;
    document.body.appendChild(temp);
    temp.select();
    document.execCommand("copy");
    document.body.removeChild(temp);
  }

  // Ø§Ù„ØµÙˆØª
  function playClick() {
    clickSound.currentTime = 0;
    clickSound.play();
  }

// Ø¨Ø­Ø« Ø¹Ø§Ù„Ù…ÙŠ Ø¹Ø¨Ø± ÙƒÙ„ Ø§Ù„Ø´ÙŠØªØ§Øª â€” ÙŠØ¹Ø±Ø¶ Ø§Ø³Ù… Ø§Ù„Ø´ÙŠØª ØªØ­Øª ÙƒÙ„ ÙƒØ§Ø±Øª
searchInput.addEventListener("input", () => {
  const q = (searchInput.value || '').trim().toLowerCase();

  // Ù„Ùˆ Ø§Ù„Ø­Ù‚Ù„ ÙØ§Ø¶ÙŠ: Ø¹Ø±Ø¶ Ø§Ù„Ø´ÙŠØª Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø£Ùˆ Ø±Ø³Ø§Ù„Ø© Ù„Ùˆ Ù…ÙÙŠØ´ Ø´ÙŠØª Ù…Ø­Ø¯Ø¯)
  if (!q) {
    if (currentSheet) {
      renderCards(workbookData[currentSheet] || []);
      sheetTitle.textContent = `ğŸ“„ Ø´ÙŠØª: ${currentSheet}`;
    } else {
      cardsGrid.innerHTML = '<div class="empty">Ø§Ø®ØªØ± Ø´ÙŠØª Ø£Ùˆ Ø§Ø±ÙØ¹ Ù…Ù„ÙÙ‹Ø§ Ù„Ù„Ø¨Ø¯Ø¡</div>';
      sheetTitle.textContent = `ğŸ“‹ Ø§Ø®ØªØ± ØµÙØ­Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©`;
    }
    return;
  }

  // Ù†Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† ÙƒÙ„ Ø§Ù„Ø´ÙŠØªØ§Øª
  const results = [];
  Object.keys(workbookData).forEach(sheetName => {
    (workbookData[sheetName] || []).forEach(item => {
      const hay = ((item.name || '') + ' ' + (item.content || '')).toString().toLowerCase();
      if (hay.includes(q)) {
        const copy = Object.assign({}, item);
        copy.sheet = sheetName; // Ø¶Ù…Ù† Ø£Ù† Ø®Ø§ØµÙŠØ© sheet Ù…ÙˆØ¬ÙˆØ¯Ø©
        results.push(copy);
      }
    });
  });

  // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
  if (!results.length) {
    cardsGrid.innerHTML = '<div class="empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© ğŸ”</div>';
    sheetTitle.textContent = `Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: "${searchInput.value.trim()}"`;
  } else {
    // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø­Ø«
    sheetTitle.textContent = `Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: "${searchInput.value.trim()}" (${results.length})`;
    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (ØªØ£ÙƒØ¯ Ø£Ù† renderCards ÙŠØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø¹Ù†Ø§ØµØ± ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ .sheet)
    renderCards(results);
  }
});
});
</script>
</body>
</html>
</div>
  <h1 style="text-align:center;margin-top:40px;">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Canned Tool ğŸ‰</h1>
</div>

<script>
const FIXED_PASSWORD = 'Chat2025';
document.addEventListener('DOMContentLoaded', () => {
  const overlay = document.getElementById('loginOverlay');
  const btn = document.getElementById('loginBtn');
  const pwd = document.getElementById('loginPwd');
  const msg = document.getElementById('loginMsg');
  const app = document.getElementById('protectedApp');

  function unlock(){
    if(pwd.value === FIXED_PASSWORD){
      overlay.style.opacity = '0';
      setTimeout(()=>overlay.style.display='none',400);
      app.style.display='block';
      setTimeout(()=>app.style.opacity='1',50);
      sessionStorage.setItem('candat_unlocked','1');
    } else {
      msg.textContent='Wrong Password';
      pwd.value='';
      pwd.focus();
    }
  }
  btn.addEventListener('click',unlock);
  pwd.addEventListener('keydown',(e)=>{if(e.key==='Enter')unlock();});
  if(sessionStorage.getItem('candat_unlocked')==='1'){
    overlay.style.display='none';
    app.style.display='block';
    app.style.opacity='1';
  }
});
</script>

</body>
</html>
